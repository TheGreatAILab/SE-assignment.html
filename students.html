<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>随机点名</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            transition: background-color 0.3s ease;
        }

        button {
            font-size: 2rem;
            padding: 1rem 2rem;
            margin: 1rem;
            border: 2px solid #333;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background-color: #333;
            color: white;
        }

        #result {
            font-size: 2rem;
            margin-top: 1rem;
        }

        #history {
            margin-top: 1rem;
            border: 1px solid #ccc;
            padding: 1rem;
            max-height: 200px;
            overflow-y: auto;
            display: none;
            position: absolute;
            top: 40px;
            left: 10px;
            background-color: white;
            z-index: 1;
        }

       .top-left {
            position: absolute;
            top: 10px;
            left: 10px;
        }

       .toggle-btn {
            font-size: 1rem;
            padding: 0.5rem 1rem;
        }
    </style>
</head>

<body>
    <div class="top-left">
        <button id="toggleHistoryBtn" class="toggle-btn">点名记录</button>
    </div>
    <button id="rollCallBtn">点名</button>
    <p id="result"></p>
    <div id="attendance-buttons">
        <button onclick="markAttendance('出勤')">出勤</button>
        <button onclick="markAttendance('缺勤')">缺勤</button>
    </div>
    <div id="history">
        <div class="flex justify-between items-center">
            <h3>点名记录</h3>
            <div>
                <i class="fa-solid fa-minus cursor-pointer" id="minimizeHistory"></i>
                <i class="fa-solid fa-xmark cursor-pointer" id="closeHistory"></i>
            </div>
        </div>
    </div>
    <script>
        const students = ["谢慧豪",
"肖金洋",
"廖嘉辉",
"李锐钊",
"罗斯",
"沈嘉乐",
"李佳音",
"丁烁芝",
"王宥森",
"严浩文",
"赖鼎昭",
"朱潇瑶",
"刘盛邦",
"黄润轩",
"许梓烁",
"杨鑫",
"詹伟翔",
"章豪斌",
"钟晨晖",
"丁奕轩",
"黄梓城",
"彭志泓",
"王阳明",
"吴承徽",
"吴佳霖",
"吴乐超",
"吴睿",
"吴深荣",
"吴玟欣",
"吴晓恒",
"吴修远",
"肖睿",
"肖添",
"谢家和",
"谢润文",
"熊昊翔",
"熊彦钧",
"徐观炼",
"徐上",
"徐子欣",
"许才明",
"许君兰",
"闫麟昊",
"阳文轩",
"杨凯",
"杨立新",
"杨铭昊",
"杨培凯",
"杨希凯",
"杨晓乐",
"杨正宇",
"姚书璟",
"姚宇翔",
"叶崇杰",
"游璐玮",
"于远洋",
"余俊翰",
"余鑫",
"张苇航",
"元朗曦",
"袁舜骐",
"岳峻宇",
"詹佳烨",
"张博然",
"张浩宇",
"张皓昱",
"张景翔",
"张洛瑜",
"张人心",
"张若璇",
"23336309",
"张文翔",
"张相钊",
"张晔",
"张逸",
"张颖琳",
"张宇然",
"张玉瑶",
"张誉方",
"张越",
"赵施琦",
"郑达维",
"郑浩翔",
"郑皓",
"郑晋凯",
"郑思扬",
"郑晓丰",
"郑鑫宇",
"郑芸熙",
"职雨欣",
"钟泓瑨",
"钟俊喆",
"钟思玥",
"钟旺烜",
"周海铭",
"周宏杰",
"周嘉尉",
"周逸",
"周雨桐",
"周梓枫",
"邹书承",
"吴永聪",
"肖淇",
"徐泓昊",
"薛炜鹏",
"张周骁",
"周子健",
"常淇博",
"陈畅",
"陈大有",
"陈龙",
"陈仁培",
"陈思谋",
"段玉飞",
"古康杰",
"郭延庚",
"何晓文",
"胡泉",
"李延泽",
"廖雪欣",
"林翠敏",
"林昀熠",
"龙宇海",
"卢晓玲",
"吕振宁",
"郭靖宇"];
        let availableStudents = [...students];
        const calledStudents = [];
        const historyElement = document.getElementById('history');
        const resultElement = document.getElementById('result');
        const rollCallBtn = document.getElementById('rollCallBtn');
        const toggleHistoryBtn = document.getElementById('toggleHistoryBtn');
        const synth = window.speechSynthesis;
        let currentStudent = null;
        const attendance = {};
        students.forEach(student => attendance[student] = null);

        rollCallBtn.addEventListener('click', function () {
            if (availableStudents.length === 0) {
                availableStudents = [...students];
            }
            const randomIndex = Math.floor(Math.random() * availableStudents.length);
            currentStudent = availableStudents.splice(randomIndex, 1)[0];
            calledStudents.push(currentStudent);
            resultElement.innerText = `本次点名：${currentStudent}`;
            const utterance = new SpeechSynthesisUtterance(currentStudent);
            synth.speak(utterance);
            const now = new Date().toLocaleString();
            const historyItem = document.createElement('p');
            historyItem.textContent = `${now}: ${currentStudent}（出勤）`;
            historyElement.appendChild(historyItem);
        });

        function markAttendance(status) {
            if (currentStudent!== null) {
                attendance[currentStudent] = status;
                const historyItems = historyElement.querySelectorAll('p');
                for (let i = 0; i < historyItems.length; i++) {
                    if (historyItems[i].textContent.includes(currentStudent)) {
                        historyItems[i].textContent = historyItems[i].textContent.replace('出勤', status);
                        break;
                    }
                }
                currentStudent = null;
            }
        }


        toggleHistoryBtn.addEventListener('click', function () {
            const history = document.getElementById('history');
            if (history.style.display === 'none') {
                history.style.display = 'block';
            } else {
                history.style.display = 'none';
            }
        });

        const minimizeHistory = document.getElementById('minimizeHistory');
        const closeHistory = document.getElementById('closeHistory');
        minimizeHistory.addEventListener('click', function () {
            const history = document.getElementById('history');
            if (history.style.maxHeight === '30px') {
                history.style.maxHeight = '200px';
            } else {
                history.style.maxHeight = '30px';
            }
        });

        closeHistory.addEventListener('click', function () {
            const history = document.getElementById('history');
            history.style.display = 'none';
        });
    </script>
</body>
</html>
